<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç±³äºçš„å¤©æ°£é å ±</title>
    <link rel="icon" type="image/png" href="./icon-v2.png">
    <link rel="apple-touch-icon" href="./icon-v2.png">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ----------------------------------------------------
           ğŸ¨ ç¹ªæœ¬é¢¨ä¸»é¡Œè‰²
        ---------------------------------------------------- */
        :root {
            --wb-bg: #F7F3EB;
            --wb-paper: #FFFCF5;
            --wb-blue: #A7C7E7;
            --wb-blue-dark: #6BA1D3;
            --wb-yellow: #F7E8A4;
            --wb-brown: #7A6652;
            --wb-green: #B7DDB2;
            --wb-orange: #E9B48C;
            --wb-shadow: rgba(0, 0, 0, 0.08);
            --wb-stroke: #5C4A3A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: var(--wb-bg);
            /*
             * ğŸ–ï¸ ä¿®æ”¹è™•ï¼šèƒŒæ™¯æ’åœ–å±¤ç–Š
             * èƒŒæ™¯åœ–ç‰‡æ˜¯åˆ†å±¤çš„ï¼Œå¯«åœ¨è¶Šå‰é¢çš„é¡¯ç¤ºåœ¨è¶Šä¸Šå±¤ã€‚
             * é€™è£¡æ–°å¢äº†ä¸‰å±¤å¯æ„›çš„æ‰‹ç¹ª SVG è£é£¾åœ¨åŸæœ¬çš„ç´‹ç†ä¹‹ä¸Šã€‚
             */
            background-image:
                /* Layer 1: æ•£è½çš„æ‰‹ç¹ªå°é›²æœµ (å·¦ä¸Šã€å³ä¸­) */
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 60' width='100' height='60'%3E%3Cpath d='M25,50 Q10,50 10,35 Q10,15 30,15 Q35,5 55,5 Q75,5 80,20 Q95,20 95,35 Q95,50 80,50 Z' fill='none' stroke='%23A7C7E7' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' opacity='0.25'/%3E%3C/svg%3E"),
                /* Layer 2: æ‰‹ç¹ªæ˜Ÿæ˜Ÿé–ƒçˆ (å³ä¸Šã€å·¦ä¸‹) */
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30' width='30' height='30'%3E%3Cpath d='M15 2 L18 12 L28 15 L18 18 L15 28 L12 18 L2 15 L12 12 Z' fill='%23F7E8A4' stroke='%23E9B48C' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' opacity='0.4'/%3E%3C/svg%3E"),
                /* Layer 3: é‡è¤‡å¹³é‹ªçš„å½©è‰²è Ÿç­†å°åœ“é»åœ–æ¡ˆ */
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Ccircle cx='20' cy='30' r='4' fill='%23A7C7E7' opacity='0.3'/%3E%3Ccircle cx='90' cy='15' r='3' fill='%23F7E8A4' opacity='0.3'/%3E%3Ccircle cx='60' cy='80' r='5' fill='%23B7DDB2' opacity='0.3'/%3E%3Ccircle cx='100' cy='100' r='4' fill='%23E9B48C' opacity='0.3'/%3E%3Ccircle cx='30' cy='110' r='3' fill='%23A7C7E7' opacity='0.3'/%3E%3C/svg%3E"),
                /* Layer 4 (Original): åŸæœ¬çš„å…‰æšˆç´‹ç† */
                radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.6), transparent 60%),
                /* Layer 5 (Original): åŸæœ¬çš„å…‰æšˆç´‹ç† */
                radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.5), transparent 70%),
                /* Layer 6 (Original): åŸæœ¬çš„ç´™å¼µæ–œç·šç´‹ç† */
                repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2) 20px, rgba(255, 255, 255, 0.3) 20px, rgba(255, 255, 255, 0.3) 40px);

            /* è¨­å®šæ¯ä¸€å±¤èƒŒæ™¯çš„ä½ç½® */
            background-position:
                -5% 10%,  /* Layer 1 é›²æœµä½ç½® (å·¦ä¸Š) */
                85% 5%,   /* Layer 2 æ˜Ÿæ˜Ÿä½ç½® (å³ä¸Š) */
                0 0,      /* Layer 3 åœ“é» (å¾å·¦ä¸Šé–‹å§‹å¹³é‹ª) */
                0 0, 0 0, 0 0; /* åŸæœ¬ç´‹ç†çš„ä½ç½® */

            /* è¨­å®šæ¯ä¸€å±¤èƒŒæ™¯çš„å¤§å° */
            background-size:
                140px auto, /* Layer 1 é›²æœµå¤§å° */
                50px 50px,  /* Layer 2 æ˜Ÿæ˜Ÿå¤§å° */
                120px 120px, /* Layer 3 åœ“é»åœ–æ¡ˆå–®å…ƒå¤§å° */
                auto, auto, auto; /* åŸæœ¬ç´‹ç†çš„å¤§å° */

            /* è¨­å®šæ¯ä¸€å±¤èƒŒæ™¯æ˜¯å¦é‡è¤‡ */
            background-repeat:
                no-repeat, /* Layer 1 ä¸é‡è¤‡ */
                no-repeat, /* Layer 2 ä¸é‡è¤‡ */
                repeat,    /* Layer 3 åœ“é»é‡è¤‡å¹³é‹ª */
                no-repeat, no-repeat, repeat; /* åŸæœ¬ç´‹ç†çš„è¨­å®š */

            min-height: 100vh;
            color: var(--wb-brown);
            overflow-x: hidden;
            padding-bottom: 20px;
        }

        /* ----------------------------------------------------
           ğŸ–ï¸ é€šç”¨ SVG åœ–ç¤ºæ¨£å¼
        ---------------------------------------------------- */
        .svg-icon {
            width: 1em;
            height: 1em;
            fill: none;
            stroke: var(--wb-stroke);
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.05));
        }
        .svg-fill {
            stroke: none;
            mix-blend-mode: multiply;
        }

        /* ----------------------------------------------------
           ğŸŒ¤ï¸ é ‚éƒ¨ç‹€æ…‹åˆ—
        ---------------------------------------------------- */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(8px);
            position: sticky;
            top: 0;
            z-index: 50;
            border-bottom: 1px solid rgba(255, 255, 255, 0.7);
        }

        .location-pill {
            background: var(--wb-yellow);
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 900;
            border: 2px dashed rgba(0, 0, 0, 0.15);
            transform: rotate(-1deg);
            box-shadow: 2px 2px 0 var(--wb-shadow);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .update-pill {
            background: var(--wb-blue-dark);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            box-shadow: 1px 1px 0 var(--wb-shadow);
        }

        /* ----------------------------------------------------
           ğŸ“¦ å®¹å™¨ï¼šç¶­æŒå–®æ¬„ï¼Œä½†åœ¨é›»è…¦ç‰ˆæ”¾å¯¬
        ---------------------------------------------------- */
        .container {
            padding: 15px;
            max-width: 600px; /* æ‰‹æ©Ÿç‰ˆé è¨­ */
            margin: 0 auto;
            transition: max-width 0.3s ease;
        }

        /* ----------------------------------------------------
           ğŸŒ¤ï¸ ä»Šæ—¥ç„¦é»å¡ç‰‡
        ---------------------------------------------------- */
        .hero-card {
            background: var(--wb-paper);
            border-radius: 32px;
            padding: 25px 20px;
            box-shadow: 0 8px 12px var(--wb-shadow);
            border: 3px solid #fffaf0;
            text-align: center;
            position: relative;
            margin-bottom: 20px; /* æ¸›å°‘ä¸‹æ–¹ç•™ç™½ */
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .hero-period {
            position: absolute;
            top: -16px;
            background: var(--wb-blue);
            color: var(--wb-brown);
            padding: 5px 20px;
            font-size: 1rem;
            font-weight: 900;
            border-radius: 20px;
            border: 2px dashed white;
            box-shadow: 0 3px 0 var(--wb-shadow);
            transform: rotate(-2deg);
        }

        @keyframes softFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .hero-icon-box {
            font-size: 7rem; /* æ‰‹æ©Ÿç‰ˆåœ–ç¤º */
            margin-top: 10px;
            animation: softFloat 4s ease-in-out infinite;
        }

        .hero-temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 5px 0 10px 0;
        }

        .hero-temp {
            font-size: 4rem;
            font-weight: 900;
            color: var(--wb-orange);
            line-height: 1;
        }

        .hero-desc {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--wb-brown);
            font-weight: 700;
        }

        /* å»ºè­°å€ */
        .advice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            width: 100%;
        }

        .advice-item {
            background: var(--wb-green);
            padding: 12px;
            border-radius: 20px;
            box-shadow: 0 4px 0 var(--wb-shadow);
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .advice-icon-box {
            font-size: 2.2rem;
            margin-bottom: 4px;
        }

        .advice-text {
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--wb-brown);
        }
        
        .advice-sub {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 2px;
        }

        /* ----------------------------------------------------
           â³ ç¨å¾Œé å ±
        ---------------------------------------------------- */
        .section-title {
            font-size: 1.2rem;
            color: var(--wb-brown);
            margin: 0 0 10px 10px;
            font-weight: 900;
        }

        .scroll-container {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 10px;
            scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        .mini-card {
            min-width: 120px;
            background: var(--wb-paper);
            padding: 14px 10px;
            border-radius: 20px;
            border: 2px solid #fff8e8;
            box-shadow: 0 4px 6px var(--wb-shadow);
            text-align: center;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .mini-time {
            background: var(--wb-yellow);
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 6px;
        }

        .mini-icon-box {
            font-size: 2.8rem;
            margin: 4px 0;
        }

        .mini-temp {
            font-size: 1rem;
            font-weight: 800;
            color: var(--wb-brown);
        }

        /* ----------------------------------------------------
           ğŸ’» Desktop RWD å„ªåŒ– (Width >= 768px)
           ç›®æ¨™ï¼šç¶­æŒä¸Šä¸‹çµæ§‹ï¼Œä½†è®“ç•«é¢åœ¨åŒä¸€é å‘ˆç¾å®Œç•¢
        ---------------------------------------------------- */
        @media (min-width: 768px) {
            .container {
                max-width: 900px; /* é›»è…¦ç‰ˆå¯¬åº¦ï¼Œä¸è¦å¤ªå¯¬ä»¥å…å¤ªæ‰ */
                padding-top: 20px;
                /* ä½¿ç”¨ Flex è®“æ•´å€‹å®¹å™¨å±…ä¸­ä¸¦æ§åˆ¶é«˜åº¦ */
                display: flex;
                flex-direction: column;
            }

            /* é ‚éƒ¨è³‡è¨Šåˆ—åŠ å¤§ */
            .location-pill { font-size: 1.5rem; padding: 8px 24px; }
            .update-pill { font-size: 1rem; padding: 8px 18px; }

            /* Hero Card è®Šæˆæ©«å‘æ’åˆ—ä»¥ç¯€çœå‚ç›´ç©ºé–“ */
            .hero-card {
                flex-direction: row; /* æ”¹ç‚ºå·¦å³æ’åˆ— */
                justify-content: space-around;
                padding: 30px 40px;
                gap: 40px;
                text-align: left;
                align-items: center;
            }

            .hero-period {
                top: -20px;
                left: 40px; /* ä½ç½®å¾®èª¿ */
                transform: rotate(-2deg) translateX(0);
                font-size: 1.2rem;
            }

            /* å·¦å´ï¼šå¤§åœ–ç¤ºèˆ‡æº«åº¦ */
            .hero-content-left {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .hero-icon-box { font-size: 9rem; margin-top: 0; }
            .hero-temp { font-size: 5rem; margin-top: -10px;}
            .hero-desc { font-size: 1.8rem; margin-bottom: 0; }

            /* å³å´ï¼šå»ºè­°å¡ç‰‡ */
            .advice-grid {
                width: auto;
                min-width: 300px;
                gap: 20px;
            }
            .advice-item { padding: 20px; }
            .advice-icon-box { font-size: 3rem; }
            .advice-text { font-size: 1.4rem; }

            /* ç¨å¾Œé å ±å€åŸŸ */
            .section-title {
                font-size: 1.4rem;
                margin-top: 10px;
            }

            /* é å ±å¡ç‰‡æ’åˆ—å„ªåŒ–ï¼šç½®ä¸­ä¸”ä¸éœ€æ²å‹• */
            .scroll-container {
                justify-content: center; /* å…§å®¹ç½®ä¸­ */
                flex-wrap: wrap; /* å…è¨±æ›è¡Œï¼ˆé›–ç„¶é€šå¸¸ä¸€è¡Œå°±å¤ ï¼‰ */
                overflow-x: visible; /* å–æ¶ˆæ²å‹• */
            }

            .mini-card {
                min-width: 140px;
                flex: 1; /* å¹³å‡åˆ†é…å¯¬åº¦ */
                max-width: 180px;
            }
            .mini-icon-box { font-size: 3.5rem; }
            .mini-temp { font-size: 1.2rem; }
        }

        /* ----------------------------------------------------
           â˜ï¸ Loading
        ---------------------------------------------------- */
        .loading-screen {
            position: fixed;
            inset: 0;
            background: var(--wb-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }
    </style>
</head>
<body>

    <div id="loading" class="loading-screen">
        <div style="width: 120px; animation: softFloat 2s infinite;">
            <svg viewBox="0 0 100 100" class="svg-icon" style="width:100%; height:100%; stroke:var(--wb-blue-dark);">
                <path class="svg-fill" fill="#E0F7FA" d="M25,60 Q15,60 15,50 Q15,35 30,35 Q35,20 55,20 Q75,20 80,35 Q95,35 95,50 Q95,60 85,60 Z" />
                <path d="M25,60 Q15,60 15,50 Q15,35 30,35 Q35,20 55,20 Q75,20 80,35 Q95,35 95,50 Q95,60 85,60 Z" />
            </svg>
        </div>
        <p style="margin-top:20px; font-weight:700; color:var(--wb-brown);">æ­£åœ¨è§€å¯Ÿå¤©ç©º...</p>
    </div>

    <div class="status-bar">
        <div class="location-pill">
            <svg viewBox="0 0 24 24" class="svg-icon" style="width:24px; height:24px; stroke-width:3;">
                <path class="svg-fill" fill="#FF8A65" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
                <circle cx="12" cy="9" r="2.5" fill="#fff"/>
            </svg>
            æ–°åŒ—å¸‚
        </div>
        <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>

    <div class="container" id="mainContent" style="display:none;">
        
        <div id="heroCard"></div>

        <h3 class="section-title">ç¨å¾Œé å ±</h3>
        <div class="scroll-container" id="futureForecasts"></div>

    </div>

    <script>
        const API_URL = "https://weather-olivia-backend.zeabur.app/api/weather/kaohsiung";

        // ğŸ¨ æ‰‹ç¹ª SVG åœ–ç¤ºåº«
        const ICONS = {
            sun: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <circle class="svg-fill" cx="50" cy="50" r="25" fill="#FFD54F" />
                    <circle cx="50" cy="50" r="25" />
                    <g stroke-width="3">
                        <line x1="50" y1="15" x2="50" y2="5" />
                        <line x1="50" y1="85" x2="50" y2="95" />
                        <line x1="15" y1="50" x2="5" y2="50" />
                        <line x1="85" y1="50" x2="95" y2="50" />
                        <line x1="25" y1="25" x2="18" y2="18" />
                        <line x1="75" y1="75" x2="82" y2="82" />
                        <line x1="75" y1="25" x2="82" y2="18" />
                        <line x1="25" y1="75" x2="18" y2="82" />
                    </g>
                </svg>`,
            cloud: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#E1F5FE" d="M25,65 Q15,65 15,55 Q15,40 30,40 Q35,25 55,25 Q75,25 80,40 Q95,40 95,55 Q95,65 85,65 Z" />
                    <path d="M25,65 Q15,65 15,55 Q15,40 30,40 Q35,25 55,25 Q75,25 80,40 Q95,40 95,55 Q95,65 85,65 Z" />
                </svg>`,
            partlyCloudy: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <circle class="svg-fill" cx="65" cy="35" r="18" fill="#FFD54F" />
                    <circle cx="65" cy="35" r="18" stroke-dasharray="4,4" />
                    <path class="svg-fill" fill="#FFFFFF" d="M20,70 Q10,70 10,60 Q10,45 25,45 Q30,30 50,30 Q70,30 75,45 Q90,45 90,60 Q90,70 80,70 Z" />
                    <path d="M20,70 Q10,70 10,60 Q10,45 25,45 Q30,30 50,30 Q70,30 75,45 Q90,45 90,60 Q90,70 80,70 Z" />
                </svg>`,
            rain: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#E0F7FA" d="M25,55 Q15,55 15,45 Q15,30 30,30 Q35,15 55,15 Q75,15 80,30 Q95,30 95,45 Q95,55 85,55 Z" />
                    <path d="M25,55 Q15,55 15,45 Q15,30 30,30 Q35,15 55,15 Q75,15 80,30 Q95,30 95,45 Q95,55 85,55 Z" />
                    <line x1="35" y1="65" x2="30" y2="75" stroke="#4FC3F7" stroke-width="3" />
                    <line x1="50" y1="65" x2="45" y2="75" stroke="#4FC3F7" stroke-width="3" />
                    <line x1="65" y1="65" x2="60" y2="75" stroke="#4FC3F7" stroke-width="3" />
                </svg>`,
            thunder: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#CFD8DC" d="M25,55 Q15,55 15,45 Q15,30 30,30 Q35,15 55,15 Q75,15 80,30 Q95,30 95,45 Q95,55 85,55 Z" />
                    <path d="M25,55 Q15,55 15,45 Q15,30 30,30 Q35,15 55,15 Q75,15 80,30 Q95,30 95,45 Q95,55 85,55 Z" />
                    <path fill="#FFEB3B" stroke="var(--wb-stroke)" d="M55,50 L40,70 L50,70 L45,90 L65,65 L55,65 Z" />
                </svg>`,
            umbrella: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#FFAB91" d="M10,50 Q50,5 90,50 Z" />
                    <path d="M10,50 Q50,5 90,50 Z" />
                    <line x1="50" y1="15" x2="50" y2="80" stroke-width="3"/>
                    <path d="M50,80 Q50,90 60,90" fill="none" stroke-width="3"/>
                </svg>`,
            noUmbrella: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#B39DDB" d="M20,40 L35,20 L50,40 L65,20 L80,40 L50,85 Z" />
                    <path d="M20,40 L35,20 L50,40 L65,20 L80,40 L50,85 Z" />
                </svg>`,
            tshirt: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#A5D6A7" d="M30,20 L70,20 L85,35 L75,45 L70,40 L70,85 L30,85 L30,40 L25,45 L15,35 Z" />
                    <path d="M30,20 L70,20 L85,35 L75,45 L70,40 L70,85 L30,85 L30,40 L25,45 L15,35 Z" />
                </svg>`,
            jacket: `
                <svg viewBox="0 0 100 100" class="svg-icon">
                    <path class="svg-fill" fill="#90CAF9" d="M30,20 L70,20 L90,40 L80,50 L70,40 L70,90 L30,90 L30,40 L20,50 L10,40 Z" />
                    <path d="M30,20 L70,20 L90,40 L80,50 L70,40 L70,90 L30,90 L30,40 L20,50 L10,40 Z" />
                    <line x1="50" y1="20" x2="50" y2="90" />
                </svg>`
        };

        function getWeatherIconSVG(weather) {
            if (!weather) return ICONS.sun;
            if (weather.includes("é›·")) return ICONS.thunder;
            if (weather.includes("é›¨")) return ICONS.rain;
            if (weather.includes("å¤šé›²") || weather.includes("é™°")) return ICONS.cloud;
            if (weather.includes("æ™´")) return ICONS.sun;
            return ICONS.partlyCloudy;
        }

        function getAdvice(rainProb, maxTemp) {
            let rainIcon = ICONS.noUmbrella;
            let rainText = "ä¸ç”¨å¸¶å‚˜";
            if (parseInt(rainProb) > 30) {
                rainIcon = ICONS.umbrella;
                rainText = "è¨˜å¾—å¸¶å‚˜";
            }

            let clothIcon = ICONS.tshirt;
            let clothText = "èˆ’é©ç©¿æ­";
            if (parseInt(maxTemp) >= 28) {
                clothIcon = ICONS.tshirt;
                clothText = "çŸ­è¢–å‡ºç™¼";
            } else if (parseInt(maxTemp) <= 20) {
                clothIcon = ICONS.jacket;
                clothText = "åŠ ä»¶å¤–å¥—";
            }
            return { rainIcon, rainText, clothIcon, clothText };
        }

        function getTimePeriod(startTime) {
            const hour = new Date(startTime).getHours();
            if (hour >= 5 && hour < 11) return "æ—©æ™¨";
            if (hour >= 11 && hour < 14) return "ä¸­åˆ";
            if (hour >= 14 && hour < 18) return "ä¸‹åˆ";
            if (hour >= 18 && hour < 23) return "æ™šä¸Š";
            return "æ·±å¤œ";
        }

        function renderWeather(data) {
            const forecasts = data.forecasts;
            const current = forecasts[0];
            const others = forecasts.slice(1);

            const advice = getAdvice(current.rain, current.maxTemp);
            const period = getTimePeriod(current.startTime);
            const avgTemp = Math.round((parseInt(current.maxTemp) + parseInt(current.minTemp)) / 2);

            // æ¸²æŸ“ä»Šæ—¥å¡ç‰‡
            // æ³¨æ„ï¼šç‚ºäº† RWDï¼Œæˆ‘å€‘åœ¨ HTML çµæ§‹ä¸Šç¨å¾®åˆ†çµ„ï¼Œè®“é›»è…¦ç‰ˆå¯ä»¥æ“ä½œ Flex
            document.getElementById('heroCard').innerHTML = `
                <div class="hero-card">
                    <div class="hero-period">${period}</div>
                    
                    <div class="hero-content-left">
                        <div class="hero-icon-box">${getWeatherIconSVG(current.weather)}</div>
                        <div class="hero-temp-container">
                            <div class="hero-temp">${avgTemp}Â°</div>
                        </div>
                        <div class="hero-desc">${current.weather}</div>
                    </div>
                    
                    <div class="advice-grid">
                        <div class="advice-item">
                            <div class="advice-icon-box">${advice.rainIcon}</div>
                            <div class="advice-text">${advice.rainText}</div>
                            <div class="advice-sub">é™é›¨ç‡ ${current.rain}</div>
                        </div>
                        <div class="advice-item">
                            <div class="advice-icon-box">${advice.clothIcon}</div>
                            <div class="advice-text">${advice.clothText}</div>
                            <div class="advice-sub">æœ€é«˜æº« ${current.maxTemp}Â°</div>
                        </div>
                    </div>
                </div>
            `;

            const scroll = document.getElementById('futureForecasts');
            scroll.innerHTML = '';
            
            const today = new Date().getDate();

            others.forEach(f => {
                let p = getTimePeriod(f.startTime);
                const fd = new Date(f.startTime);
                if (fd.getDate() !== today) p = "æ˜å¤©" + p;

                scroll.innerHTML += `
                    <div class="mini-card">
                        <div class="mini-time">${p}</div>
                        <div class="mini-icon-box">${getWeatherIconSVG(f.weather)}</div>
                        <div class="mini-temp">${f.minTemp}Â° - ${f.maxTemp}Â°</div>
                        <div style="margin-top:4px; font-size:0.85rem; color:#999;">ğŸ’§${f.rain}</div>
                    </div>
                `;
            });

            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const days = ["é€±æ—¥","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­"];
            document.getElementById('updateTime').textContent = `${month}æœˆ${date}æ—¥ ${days[now.getDay()]}`;
        }

        async function fetchWeather() {
            try {
                const delay = new Promise(r => setTimeout(r, 1000));
                const fetchData = fetch(API_URL).then(r => r.json());
                const [_, json] = await Promise.all([delay, fetchData]);

                if (json.success) {
                    renderWeather(json.data);
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'flex'; // ä¿®æ”¹ç‚º flex ä»¥é…åˆå®¹å™¨
                }
            } catch (e) {
                alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼");
                console.error(e);
            }
        }

        document.addEventListener("DOMContentLoaded", fetchWeather);
    </script>
</body>
</html>